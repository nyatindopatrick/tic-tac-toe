#!/usr/bin/env ruby

require_relative '../lib/game_logic.rb'

game_board = Board.new
game_board.display_board
puts 'Welcome player1, please enter your name?'
player1_name = gets.chomp
puts 'Welcome player2, please enter your name?'
player2_name = gets.chomp
game_logic = Logic.new
winner = Winner.new(player1_name, player2_name)

count = 0

loop do |_i|
  current_player = count.even? ? player1_name : player2_name
  user_data = game_logic.askuser(current_player)
  player_sign = current_player == player1_name ? 'X' : 'O'
  res = game_logic.update_board(user_data, player_sign)
  if res
    puts res
    user_data = game_logic.askuser(current_player)
    game_logic.update_board(user_data, player_sign)
  end
  game_board.display_board
  win = winner.win_moves
  if win
    puts win
    break
  end
  count += 1
  if count == 9
    puts 'Draw!'
    break
  end
end
