#!/usr/bin/env ruby
require_relative '../lib/game_logic.rb'

placeholders = [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']

game_board = Board.new
game_board.display_board(placeholders)
puts 'Welcome player1, please enter your name?'
player1_name = gets.chomp
puts 'Welcome player2, please enter your name?'
player2_name = gets.chomp
game_logic = Logic.new
winner = Winner.new

condition = true
count = 0
current_player = game_logic.players_turn(player1_name, player2_name)

loop do |i|

  puts "#{current_player} - Please enter a value between 1-9"
  player1_choice = gets.chomp.to_i
  if placeholders[player1_choice - 1]  == " "
    placeholders[player1_choice - 1] = "X"
    condition = false
  else
    puts "No free space! Choose another position."
    condition = true
    player1_choice = gets.chomp.to_i
  end
  game_board.display_board(placeholders)
  win = winner.win_moves(placeholders)
  puts win 
  break if win

  next_player = game_logic.change_player(player1_name,player2_name) if condition == false

  puts "#{next_player} - Please enter a value between 1-9"
  player2_choice = gets.chomp.to_i
  if placeholders[player2_choice - 1]  == " "
    placeholders[player2_choice - 1] = "O"
    condition = false
  else
    puts "No free space! Choose another position."
    condition = true
    player2_choice = gets.chomp.to_i
  end
  game_board.display_board(placeholders)
  win = winner.win_moves(placeholders)
  puts win 
  break if win

  next_player = game_logic.change_player(player1_name,player2_name) if condition == false

  count += 1
  break if count == 4

end