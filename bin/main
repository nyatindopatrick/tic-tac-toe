#!/usr/bin/env ruby

require_relative '../lib/game_logic.rb'
require_relative '../lib/helper_module.rb'
require_relative '../lib/game_play.rb'
# rubocop:disable Metrics/CyclomaticComplexity
def play
  inputs = Helper.welcome_player
  game_board = Board.new(inputs[0], inputs[1])
  puts game_board.display_board
  count = 0
  loop do |_i|
    current_player = count.even? ? inputs[0] : inputs[1]
    ask_user = game_board.empty_space(current_player)
    player = Play.new(current_player)
    game_signs = player.player_sign(inputs[0])
    game_board.update_board(ask_user, game_signs)
    puts game_board.display_board
    win_move = game_board.win_moves(current_player)
    win = game_board.check_winner(current_player, win_move)
    count += 1
    return Helper.end_game(win) == 'n' ? break : play if win
    return Helper.end_game('Draw!') == 'n' ? break : play if count == 9 && !win
  end
end
# rubocop:enable Metrics/CyclomaticComplexity
play